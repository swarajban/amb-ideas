<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>My Page</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            html,
            body {
                height: 100%;
                width: 100%;
                background-color: #de9800;
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .circle {
                width: 30vmin;
                height: 30vmin;
                background-color: black;
                border-radius: 50%;
                display: flex;
                justify-content: center;
                align-items: center;
                position: relative;
            }

            .tick {
                position: absolute;
                width: 2px;
                height: 1vmin;
                background-color: grey;
                top: 0.5vmin;
                left: 50%;
                transform-origin: 50% 14.5vmin;
            }

            .number {
                color: white;
                font-family: Arial, sans-serif;
                font-size: 10vmin;
                font-weight: bold;
            }

            .button-container {
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                display: flex;
                gap: 40px;
            }

            .btn {
                width: 60px;
                height: 60px;
                background-color: black;
                border: none;
                cursor: pointer;
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
            }

            .btn-circle {
                border-radius: 50%;
            }

            .btn-square {
                border-radius: 0;
            }

            .minus,
            .plus {
                color: red;
                font-size: 30px;
                font-weight: bold;
            }
        </style>
    </head>
    <body>
        <div class="circle">
            <span class="number">40</span>
        </div>
        <div class="button-container">
            <button class="btn btn-circle" id="decreaseBtn"><span class="minus">âˆ’</span></button>
            <button class="btn btn-square" id="increaseBtn"><span class="plus">+</span></button>
        </div>
        <script>
            const display = document.querySelector(".number");
            const decreaseBtn = document.getElementById("decreaseBtn");
            const increaseBtn = document.getElementById("increaseBtn");
            let value = 40;

            const engineSound = new Audio("engine.mp3");
            const brakeSound = new Audio("brake.m4a");
            engineSound.loop = true;

            function startEngineSound() {
                if (value >= 2) {
                    engineSound.currentTime = 0;
                    engineSound.play();
                }
            }

            function stopEngineSound() {
                engineSound.pause();
                engineSound.currentTime = 0;
            }

            function playBrakeIfNeeded() {
                if (value <= 1) {
                    brakeSound.currentTime = 0;
                    brakeSound.play();
                }
            }

            function updateDisplay() {
                display.textContent = value;

                let color;
                if (value < 20) {
                    color = "white";
                } else if (value <= 29) {
                    color = "green";
                } else if (value <= 39) {
                    color = "blue";
                } else if (value <= 89) {
                    color = "orange";
                } else {
                    color = "red";
                }
                display.style.color = color;
            }

            function decrease() {
                if (value > 0) {
                    value--;
                    updateDisplay();
                    playBrakeIfNeeded();
                }
            }

            function increase() {
                if (value < 100) {
                    value++;
                    updateDisplay();
                }
            }

            function startHold(action) {
                action();
                let interval = setInterval(action, 100);
                return interval;
            }

            function setupButton(btn, action) {
                let interval = null;

                const start = (e) => {
                    e.preventDefault();
                    startEngineSound();
                    interval = startHold(action);
                };

                const stop = () => {
                    if (interval) {
                        clearInterval(interval);
                        interval = null;
                        stopEngineSound();
                    }
                };

                btn.addEventListener("mousedown", start);
                btn.addEventListener("mouseup", stop);
                btn.addEventListener("mouseleave", stop);
                btn.addEventListener("touchstart", start);
                btn.addEventListener("touchend", stop);
            }

            setupButton(decreaseBtn, decrease);
            setupButton(increaseBtn, increase);

            updateDisplay();

            // Create 60 tick marks
            const circle = document.querySelector(".circle");
            for (let i = 0; i < 60; i++) {
                const tick = document.createElement("div");
                tick.className = "tick";
                tick.style.transform = `rotate(${i * 6}deg)`;
                circle.appendChild(tick);
            }
        </script>
    </body>
</html>
